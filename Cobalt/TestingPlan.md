# *Сокращения*:
* RP - RemoteProgramming.exe (утилита для формирования байтовой конфигурации прибора по данным из БД (***режим записи***) и обратного преобразования байтовых данных из прибора в данные в БД (***режим чтения***))

# Коды в таблице Journal
* 98 - команда для SCM на удаленное вычитывание кобальта
  * при обработке SCM формирует команду "запрос конфигурации"  в таблице ПЕРЕДАТЬ
  * прибор, получив команду, отправляет на пульт свою конфигурацию
  * UAM:
    1. получив от прибора пакет с конфигурацией, сохраняет её в файл Settings_<id прибора>.bin
    2. запускает PR (из папки MS/RP/) в режиме чтения, передавая на вход файл Settings_<id прибора>.bin
    3. RP разбираем конфигурацию и **обновляет прибор** в БД
    4. Поле *ЗАПИСЬ* в таблице *ПРИБОР*
    
* 99 - команды для SCM на удаленное перепрограммирование (если IDProg некорректный) или вычитывание конфигурации (если прибор не существует в БД)
  * Определяем есть ли прибор в БД по SN
    1. Если **есть в БД**: запускается RP (из папки MS/RP/) в режиме записи, прибор программируется удаленно
    2. Если ***нет в БД***: формируется команда "запрос конфигурации" в таблице ПЕРЕДАТЬ, прибор вычитывается удаленно (***повторяет работу алгоритма с записью 98 в Journal***).  
    
  *Почему так? Насколько помню, коды были повторены как на удаленно вычитываемых Гранитах-USB, впринципе можно пересмотреть логику работы и формировать 98 только для вычитываний, а 99 только для перепрограммирований.*


# Когда прибор вычитывается из UAM

# Когда прибор вычитывается из SCM

# Когда прибор программируется из UAM

# Когда прибор программируется из SCM

# Разновидности программирования прибора

## Добавление прибора из базы

## Редактирование прибора в базе

## Добавление прибора автономно
**Удаленное вычитывание новых приборов включено**

## Добавление прибора автономно
**Удаленное вычитывание новых приборов выключено, делаем через импорт**

## Редактирование прибора автономно
**Удаленное вычитывание новых приборов включено**

## Редактирование прибора автономно
**Удаленное вычитывание существующих приборов выключено, делаем через импорт**

- - -
***Нужно еще вложенные флажки для удаленного вычитывания существующих приборов разобрать***
